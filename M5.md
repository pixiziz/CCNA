### 配置EIGRP

**开启并且给与一个自治系统编号 Router EIGRP**

```tcl
Router(config)#router eigrp 90    全网都要写90，这个系统编号是可以自定义的。
Router(config-router)#
```

**宣布直连网段**

network 192.168.1.0  0.0.0.255 

**通配符--掩码--反掩码   写错了会被自动翻转**

225.255.255.0--->0.0.0.255

```tcl
Router(config-router)#network 192.168.1.0 0.0.0.255 
Router(config-router)#network 192.168.3.0 0.0.0.255
```

![](https://raw.githubusercontent.com/zhoujiuzhou9/PicGo/main/pic/2344.png)

**查看路由表**

```tcl
Router#show ip route 
Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area 
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       ia - IS-IS inter area, * - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP
       a - application route
       + - replicated route, % - next hop override

Gateway of last resort is not set

      4.0.0.0/32 is subnetted, 1 subnets
C        4.4.4.4 is directly connected, Loopback1
D     192.168.1.0/24 [90/307200] via 192.168.2.1, 00:02:18, Ethernet0/0   
## D在此处表示EIGRP的意思   [90/307200]90表示优先级管理距离  307200是度量值（用于相同协议之间比较的东西）
      192.168.2.0/24 is variably subnetted, 2 subnets, 2 masks
C        192.168.2.0/24 is directly connected, Ethernet0/0
L        192.168.2.2/32 is directly connected, Ethernet0/0
D     192.168.3.0/24 [90/307200] via 192.168.4.1, 00:02:18, Ethernet0/1
      192.168.4.0/24 is variably subnetted, 2 subnets, 2 masks
C        192.168.4.0/24 is directly connected, Ethernet0/1
L        192.168.4.2/32 is directly connected, Ethernet0/1
```

### EIGRP邻居建立

5秒发送一次  15秒超时

hello 目的224.0.0.10 组播地址，只有运行EIGRP协议的，路由才会接受和支持

### EIGRP的数据包

+ hello包 用于建立邻居，维护邻居
+ 路由更新包 (UPDATE)，邻居建立之后发送路由更新--一般组播地址
+ Query包--查询，当某条路由丢失向邻居查询关于这条路由的信息
+ Repaly包--回复Query包
+ Ack包，确认信息包----TCP  **确认这个Update--query确认Repaly  就是确认上述三包，hello包不需要确认**

![](https://raw.githubusercontent.com/zhoujiuzhou9/PicGo/main/pic/456233848.png)



### EIGRP三张表

EIGRP路由表 --- 路由表

EIGRP邻居表 --- 邻居表

EIGRP拓扑表 --- 能到达目的网络的路由都会加入到此表，不是所有的路由都能加到拓扑表，必须满足FC可行条件

![](https://raw.githubusercontent.com/zhoujiuzhou9/PicGo/main/pic/ss456233848.png)

### DUAL算法 弥散更新算法

![](https://raw.githubusercontent.com/zhoujiuzhou9/PicGo/main/pic/m4326598.png)

